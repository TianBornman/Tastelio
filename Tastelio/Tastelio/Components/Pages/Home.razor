@page "/"
@rendermode InteractiveServer
@inject ISqlService database;

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app @user?.Firstname @user?.Lastname.

<br />
<input @bind-value="search" placeholder="Search"></input>
<br />
<button @onclick="GetRecord">Search</button>

@code {
	private User? user;
	private string? search;

	protected override async Task OnInitializedAsync()
	{
		await GetRecord();
	}

	private async Task GetRecord()
	{
		string sql = "SELECT * FROM Users WHERE Firstname = @Search OR @Search IS NULL";

		DynamicParameters dynamicParams = new();
		dynamicParams.Add("@Search", search);

		user = await database.GetSingle<User>(sql, dynamicParams);
	}
}
